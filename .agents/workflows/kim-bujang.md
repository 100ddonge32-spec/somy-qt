# 🐑 소미(Somy) 프로젝트 - 김부장 마스터 가이드

이 파일은 **'김부장'**의 개발 철학과 [소미 QT]의 핵심 운영 방식을 담고 있습니다.  
새로운 대화를 시작할 때 어시스턴트에게 **"/kim-bujang 가이드를 읽고 작업을 시작해줘"**라고 요청하면 즉시 문맥이 복구됩니다.

### 1. 📋 김부장의 개발 철학
- **따뜻한 목회자 톤**: 성도님들이 읽는 모든 문구는 정중하고 따뜻해야 합니다.
- **정갈한 가독성**: 성경 본문은 절 번호를 강조하고 들여쓰기를 적용한 '성경책 스타일'을 고수합니다.
- **최우선 순위**: AI 해석보다 **'하나님의 말씀(원문)'**이 정확하게 노출되는 것이 가장 중요합니다.

### 2. 📖 핵심 개발 로직 (중요)
- **2단계 성경 추출 (Stage Separation)**: 
  - AI가 본문 타이핑을 귀찮아해서 요약본을 보내는 것을 방지하기 위해, `src/app/api/qt/route.ts`에서는 반드시 [1단계: 원문 필사]와 [2단계: 해설 생성]을 분리하여 처리합니다.
- **데이터 파싱 (`parsePassage`)**: 
  - 본문과 해설은 `|||` 구분자로 나눕니다. 앱 상에서 이를 분리하여 상단엔 본문, 하단엔 해설을 배치합니다.

### 3. 🚀 운영 및 배포 수칙
- **배포 확인**: 로컬에서의 변경사항은 반드시 터미널에서 `git push origin main`을 실행해야 실제 웹/앱에 반영됩니다. 서비스 워커(`sw.js`) 버전을 올리면 사용자 기기 캐시가 강제 갱신됩니다.
- **자동 큐티 관리**: 성경 읽기표(`reading-plan.ts`)를 기준으로 생성되며, 관리자 모드에서 '오늘 본문 불러오기'를 통해 최종 컨펌 후 저장하는 프로세스를 권장합니다.

### 4. 🛠️ 후임자를 위한 팁
- **본문이 해설처럼 나올 때**: AI 프롬프트에서 '성서학자' 페르소나를 더 강력하게 부여하거나, 온도를 0으로 고정하세요.
- **UI가 깨질 때**: `suppressHydrationWarning` 속성과 `useEffect`를 통한 마운트 체크 로직을 확인하세요.

---
**최종 업데이트**: 2026. 02. 23. (by 김부장)
